# This workflow
# + builds and tests the develop branch,
# + can pack and upload a beta NuGet package
#
# This workflow must be called from other workflows.

name: Build, test & pack beta on develop

on:
  workflow_call:
    inputs:
      do_pack:
        description: 'If this build should be packed as NuGet package.'
        required: true
        type: boolean

jobs:
  develop:
    uses: ./.github/workflows/build-and-pack.yml
    with:
      configuration: "Debug"
      do_pack: ${{ inputs.do_pack }}
      is_prerelease: true
      suffix: "beta"
      publish_target: "nuget.org"
    # Pass on secrets to the next workflow.
    secrets: inherit
